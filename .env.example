# =============================================================================
# Integram Standalone - Environment Configuration
# =============================================================================
# This file contains all configuration settings mapped from PHP monolith.
# Copy this file to .env and update values for your environment.
#
# Maps PHP configuration from:
# - index.php (constants and settings)
# - include/connection.php (database and mail config)
# - auth.php (OAuth provider config)
# =============================================================================

# -----------------------------------------------------------------------------
# Frontend API Configuration (Vite)
# -----------------------------------------------------------------------------
VITE_API_URL=http://localhost:3000
VITE_WS_URL=ws://localhost:3000
VITE_INTEGRAM_URL=https://dronedoc.ru

# Application Settings
VITE_APP_TITLE=Integram Standalone
VITE_APP_DESCRIPTION=Управление данными и бизнес-процессами

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=3000
HOST=0.0.0.0

# Base URL for the application (used for redirects and links)
# Maps to: $_SERVER["SERVER_NAME"]
BASE_URL=https://app.integram.io

# -----------------------------------------------------------------------------
# Database Configuration
# Maps to: include/connection.php mysqli_connect()
# -----------------------------------------------------------------------------
DB_HOST=localhost
DB_USER=integram
DB_PASSWORD=integram123
DB_NAME=integram
DB_CHARSET=utf8mb4
DB_PORT=3306

# Connection pool settings
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_CONNECTION_TIMEOUT=30000

# -----------------------------------------------------------------------------
# Authentication Configuration
# Maps to: index.php SALT, COOKIES_EXPIRE, token generation
# -----------------------------------------------------------------------------

# Password salt for SHA1 hashing (legacy PHP compatibility)
# Maps to: define("SALT", 'DronedocSalt2025')
AUTH_SALT=DronedocSalt2025

# Admin hash for system operations
# Maps to: define("ADMINHASH", sha1($_SERVER["SERVER_NAME"].$z."DronedocIntegram2025"))
AUTH_ADMIN_SECRET=DronedocIntegram2025

# Cookie expiration time in seconds (30 days = 2592000)
# Maps to: define("COOKIES_EXPIRE", 2592000)
AUTH_COOKIE_EXPIRE=2592000

# JWT Configuration
JWT_SECRET=your-jwt-secret-key-change-me
JWT_EXPIRES_IN=86400
JWT_PUBLIC_KEY=

# Session secret for Express sessions
SESSION_SECRET=your-session-secret-change-me

# Integram Credentials
# ⚠️ CRITICAL SECURITY: These credentials are used for OAuth and email registration
# - NEVER commit real credentials to git
# - Rotate these credentials immediately if exposed
# - Use strong, unique passwords (minimum 16 characters)
# - These credentials have system-level access to create user accounts
INTEGRAM_SYSTEM_USERNAME=your_username
INTEGRAM_SYSTEM_PASSWORD=your_secure_password
INTEGRAM_DEFAULT_DATABASE=your_database
INTEGRAM_REGISTRATION_USERNAME=your_registration_username
INTEGRAM_REGISTRATION_PASSWORD=CHANGE_THIS_PASSWORD

# -----------------------------------------------------------------------------
# SMTP Mail Configuration
# Maps to: include/connection.php $mail_config
# -----------------------------------------------------------------------------
SMTP_HOST=ssl://smtp.yandex.ru
SMTP_PORT=465
SMTP_USER=abc@tryjob.ru
SMTP_PASSWORD=your-smtp-password
SMTP_FROM=Integram
SMTP_CHARSET=utf-8
SMTP_DEBUG=false

# Admin email for notifications
# Maps to: define("ADMINEMAIL", "...")
ADMIN_EMAIL=admin@example.com

# -----------------------------------------------------------------------------
# OAuth Provider Configuration
# Maps to: auth.php $config and index.php OAuth settings
# -----------------------------------------------------------------------------

# Yandex OAuth
# Maps to: define("Y_CLIENT_ID"), define("Y_CLIENT_PK")
OAUTH_YANDEX_CLIENT_ID=
OAUTH_YANDEX_CLIENT_SECRET=
OAUTH_YANDEX_REDIRECT_URI=${BASE_URL}/auth/callback/yandex

# VK OAuth
OAUTH_VK_CLIENT_ID=
OAUTH_VK_CLIENT_SECRET=
OAUTH_VK_REDIRECT_URI=${BASE_URL}/auth/callback/vk

# Mail.ru OAuth
OAUTH_MAILRU_CLIENT_ID=
OAUTH_MAILRU_CLIENT_SECRET=
OAUTH_MAILRU_REDIRECT_URI=${BASE_URL}/auth/callback/mailru

# Google OAuth
OAUTH_GOOGLE_CLIENT_ID=
OAUTH_GOOGLE_CLIENT_SECRET=
OAUTH_GOOGLE_REDIRECT_URI=${BASE_URL}/auth/callback/google

# GitHub OAuth
OAUTH_GITHUB_CLIENT_ID=
OAUTH_GITHUB_CLIENT_SECRET=
OAUTH_GITHUB_REDIRECT_URI=${BASE_URL}/auth/callback/github

# -----------------------------------------------------------------------------
# SMS Configuration
# Maps to: define("SMS_SADR"), define("SMS_OP")
# -----------------------------------------------------------------------------
SMS_SENDER_ADDRESS=CoffeeClick
SMS_API_URL=http://gateway.api.sc/get/
SMS_API_USER=
SMS_API_PASSWORD=

# -----------------------------------------------------------------------------
# File Upload Configuration
# Maps to: define("UPLOAD_DIR", "download/$z/")
# -----------------------------------------------------------------------------
UPLOAD_DIR=./uploads
UPLOAD_MAX_SIZE=10485760

# -----------------------------------------------------------------------------
# Logging Configuration
# Maps to: define("LOGS_DIR", "logs/")
# -----------------------------------------------------------------------------
LOGS_DIR=./logs
LOG_LEVEL=info
LOG_SQL=false
LOG_SQL_SLOW_THRESHOLD=1000

# -----------------------------------------------------------------------------
# UI Limits (from index.php define statements)
# Maps to: define("DEFAULT_LIMIT"), define("DDLIST_ITEMS"), define("VAL_LIM")
# -----------------------------------------------------------------------------
DEFAULT_LIMIT=20
DDLIST_ITEMS=80
VAL_LIM=127

# Template paths
# Maps to: define("TEMPLATES", ":en:ru:fu:mo:fm:")
TEMPLATES=:en:ru:fu:mo:fm:

# -----------------------------------------------------------------------------
# Service Ports (for microservices architecture)
# -----------------------------------------------------------------------------

# Auth Service
AUTH_SERVICE_PORT=3001
AUTH_SERVICE_URL=http://localhost:3001

# Core Data Service
CORE_DATA_SERVICE_PORT=3002
CORE_DATA_SERVICE_URL=http://localhost:3002

# File Service
FILE_SERVICE_PORT=3003
FILE_SERVICE_URL=http://localhost:3003

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
CORS_ORIGIN=*
CORS_CREDENTIALS=true

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
